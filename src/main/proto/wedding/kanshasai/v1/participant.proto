syntax = "proto3";

package wedding.kanshasai.v1;

option csharp_namespace = "WeddingCamp.ProtoBuf";
option java_multiple_files = true;
option java_outer_classname = "ParticipantProto";
option java_package = "wedding.kanshasai.v1";

// 参加者に関連する操作を提供するサービス
service ParticipantService {
  // 参加者作成（管理側用）
  rpc CreateParticipant(CreateParticipantRequest) returns (CreateParticipantResponse);
  // 参加者更新（管理側用）
  rpc UpdateParticipant(UpdateParticipantRequest) returns (UpdateParticipantResponse);
  // 参加者一覧
  rpc ListParticipant(ListParticipantRequest) returns (ListParticipantResponse);
  // 参加者登録
  rpc RegisterParticipant(RegisterParticipantRequest) returns (RegisterParticipantResponse);
  // 参加者向けイベントストリーム
  rpc StreamParticipantEvent(StreamParticipantEventRequest) returns (stream StreamParticipantEventResponse);
  // 回答登録
  rpc SetAnswer(SetAnswerRequest) returns (SetAnswerResponse);
}

// 参加者作成リクエスト
message CreateParticipantRequest {
  // セッションID
  string session_id = 1;
  // 参加者名
  string name = 2;
  // 画像ファイルID
  optional string image_id = 3;
}

// 参加者作成レスポンス
message CreateParticipantResponse {
  // 参加者ID
  string participant_id = 1;
  // セッションID
  string session_id = 2;
  // 参加者名
  string name = 3;
  // 画像ファイルID
  optional string image_id = 4;
}

// 参加者更新リクエスト
message UpdateParticipantRequest {
  // 参加者ID
  string participant_id = 1;
  // セッションID
  string session_id = 2;
  // 参加者名
  string name = 3;
  // 画像ファイルID
  optional string image_id = 4;
}

// 参加者更新レスポンス
message UpdateParticipantResponse {
  // 参加者ID
  string participant_id = 1;
  // セッションID
  string session_id = 2;
  // 参加者名
  string name = 3;
  // 画像ファイルID
  optional string image_id = 4;
}

// 参加者一覧リクエスト
message ListParticipantRequest {
  // セッションID
  string session_id = 1;
}

// 参加者一覧レスポンス
message ListParticipantResponse {
  // 参加者オブジェクト
  message Participant {
    // 参加者ID
    string participant_id = 1;
    // セッションID
    string session_id = 2;
    // 参加者名
    string name = 3;
    // 画像ファイルID
    optional string image_id = 4;
  }
  // 参加者の配列
  repeated Participant participants = 1;
}

// 参加者登録リクエスト
message RegisterParticipantRequest {
  // セッションID
  string session_id = 1;
  // 参加者ID
  string participant_id = 2;
  // TODO: アンケートを追加する場合ここ
}

// 参加者登録レスポンス
message RegisterParticipantResponse {
  // Empty
}

// 参加者向けイベントストリームリクエスト
message StreamParticipantEventRequest {
  // 参加者ID
  string participant_id = 1;
}

// 参加者向けイベントストリームレスポンス
message StreamParticipantEventResponse {
  // TODO
}

// 回答登録リクエスト
message SetAnswerRequest {
  // 参加者ID
  string participant_id = 1;
  // クイズID
  string quiz_id = 2;
  // 回答データ
  string answer = 3;
}

// 回答登録レスポンス
message SetAnswerResponse {
  // TODO
}
